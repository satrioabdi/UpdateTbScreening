{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\WebsiteTBC\\\\tbscreening\\\\src\\\\screens\\\\RegisterScreen.js\",\n  _s = $RefreshSig$();\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useEffect, useState } from 'react';\nimport { Alert, Platform, StyleSheet, Text, TextInput, TouchableOpacity, View } from 'react-native';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RegisterScreen({\n  navigation\n}) {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('user');\n  const [currentRole, setCurrentRole] = useState('user');\n  useEffect(() => {\n    const getCurrentUserRole = async () => {\n      const savedRole = await AsyncStorage.getItem('role');\n      if (savedRole) setCurrentRole(savedRole);\n    };\n    getCurrentUserRole();\n  }, []);\n  const showAlert = (title, message, callback) => {\n    if (Platform.OS === 'web') {\n      window.alert(`${title}\\n\\n${message}`);\n      if (callback) callback();\n    } else {\n      Alert.alert(title, message, [{\n        text: 'OK',\n        onPress: callback\n      }]);\n    }\n  };\n  const handleRegister = async () => {\n    if (!username || !password) {\n      showAlert('Error', 'Semua field wajib diisi.');\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:5000/api/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password,\n          role,\n          current_user_role: currentRole\n        })\n      });\n      const result = await response.json();\n      if (response.ok) {\n        showAlert('Sukses', 'Registrasi berhasil', () => {\n          setUsername('');\n          setPassword('');\n          navigation.navigate('LoginScreen');\n        });\n      } else {\n        showAlert('Gagal', result.message || 'Terjadi kesalahan saat registrasi.');\n      }\n    } catch (error) {\n      showAlert('Error', 'Tidak dapat terhubung ke server.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(View, {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      style: styles.title,\n      children: \"Form Registrasi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n      placeholder: \"Username\",\n      value: username,\n      onChangeText: setUsername,\n      style: styles.input\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n      placeholder: \"Password\",\n      value: password,\n      onChangeText: setPassword,\n      secureTextEntry: true,\n      style: styles.input\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), currentRole === 'admin' && /*#__PURE__*/_jsxDEV(View, {\n      style: styles.roleContainer,\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        style: styles.label,\n        children: \"Pilih Role:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TouchableOpacity, {\n        style: [styles.roleButton, role === 'user' && styles.roleSelected],\n        onPress: () => setRole('user'),\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          children: \"User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TouchableOpacity, {\n        style: [styles.roleButton, role === 'admin' && styles.roleSelected],\n        onPress: () => setRole('admin'),\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TouchableOpacity, {\n      onPress: handleRegister,\n      style: styles.button,\n      children: /*#__PURE__*/_jsxDEV(Text, {\n        style: styles.buttonText,\n        children: \"Daftar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterScreen, \"qXTCyQgPBORk6DDj39Vce1oXD+8=\");\n_c = RegisterScreen;\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    color: '#d10000',\n    marginBottom: 20,\n    textAlign: 'center'\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#aaa',\n    borderRadius: 6,\n    padding: 10,\n    marginBottom: 15\n  },\n  button: {\n    backgroundColor: '#d10000',\n    padding: 12,\n    borderRadius: 6,\n    marginTop: 10\n  },\n  buttonText: {\n    color: '#fff',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  roleContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 10,\n    alignItems: 'center'\n  },\n  roleButton: {\n    padding: 10,\n    borderWidth: 1,\n    borderColor: '#aaa',\n    borderRadius: 6\n  },\n  roleSelected: {\n    backgroundColor: '#eee'\n  },\n  label: {\n    marginRight: 8\n  }\n});\nvar _c;\n$RefreshReg$(_c, \"RegisterScreen\");","map":{"version":3,"names":["AsyncStorage","useEffect","useState","Alert","Platform","StyleSheet","Text","TextInput","TouchableOpacity","View","jsxDEV","_jsxDEV","RegisterScreen","navigation","_s","username","setUsername","password","setPassword","role","setRole","currentRole","setCurrentRole","getCurrentUserRole","savedRole","getItem","showAlert","title","message","callback","OS","window","alert","text","onPress","handleRegister","response","fetch","method","headers","body","JSON","stringify","current_user_role","result","json","ok","navigate","error","style","styles","container","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChangeText","input","secureTextEntry","roleContainer","label","roleButton","roleSelected","button","buttonText","_c","create","flex","padding","justifyContent","backgroundColor","fontSize","fontWeight","color","marginBottom","textAlign","borderWidth","borderColor","borderRadius","marginTop","flexDirection","alignItems","marginRight","$RefreshReg$"],"sources":["C:/laragon/www/WebsiteTBC/tbscreening/src/screens/RegisterScreen.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Alert,\r\n    Platform,\r\n    StyleSheet,\r\n    Text,\r\n    TextInput,\r\n    TouchableOpacity,\r\n    View\r\n} from 'react-native';\r\n\r\nexport default function RegisterScreen({ navigation }) {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [role, setRole] = useState('user');\r\n  const [currentRole, setCurrentRole] = useState('user');\r\n\r\n  useEffect(() => {\r\n    const getCurrentUserRole = async () => {\r\n      const savedRole = await AsyncStorage.getItem('role');\r\n      if (savedRole) setCurrentRole(savedRole);\r\n    };\r\n    getCurrentUserRole();\r\n  }, []);\r\n\r\n  const showAlert = (title, message, callback) => {\r\n    if (Platform.OS === 'web') {\r\n      window.alert(`${title}\\n\\n${message}`);\r\n      if (callback) callback();\r\n    } else {\r\n      Alert.alert(title, message, [{ text: 'OK', onPress: callback }]);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    if (!username || !password) {\r\n      showAlert('Error', 'Semua field wajib diisi.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          username,\r\n          password,\r\n          role,\r\n          current_user_role: currentRole,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        showAlert('Sukses', 'Registrasi berhasil', () => {\r\n          setUsername('');\r\n          setPassword('');\r\n          navigation.navigate('LoginScreen');\r\n        });\r\n      } else {\r\n        showAlert('Gagal', result.message || 'Terjadi kesalahan saat registrasi.');\r\n      }\r\n    } catch (error) {\r\n      showAlert('Error', 'Tidak dapat terhubung ke server.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Form Registrasi</Text>\r\n\r\n      <TextInput\r\n        placeholder=\"Username\"\r\n        value={username}\r\n        onChangeText={setUsername}\r\n        style={styles.input}\r\n      />\r\n\r\n      <TextInput\r\n        placeholder=\"Password\"\r\n        value={password}\r\n        onChangeText={setPassword}\r\n        secureTextEntry\r\n        style={styles.input}\r\n      />\r\n\r\n      {currentRole === 'admin' && (\r\n        <View style={styles.roleContainer}>\r\n          <Text style={styles.label}>Pilih Role:</Text>\r\n          <TouchableOpacity\r\n            style={[styles.roleButton, role === 'user' && styles.roleSelected]}\r\n            onPress={() => setRole('user')}\r\n          >\r\n            <Text>User</Text>\r\n          </TouchableOpacity>\r\n          <TouchableOpacity\r\n            style={[styles.roleButton, role === 'admin' && styles.roleSelected]}\r\n            onPress={() => setRole('admin')}\r\n          >\r\n            <Text>Admin</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      )}\r\n\r\n      <TouchableOpacity onPress={handleRegister} style={styles.button}>\r\n        <Text style={styles.buttonText}>Daftar</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 20,\r\n    justifyContent: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  title: {\r\n    fontSize: 22,\r\n    fontWeight: 'bold',\r\n    color: '#d10000',\r\n    marginBottom: 20,\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: '#aaa',\r\n    borderRadius: 6,\r\n    padding: 10,\r\n    marginBottom: 15,\r\n  },\r\n  button: {\r\n    backgroundColor: '#d10000',\r\n    padding: 12,\r\n    borderRadius: 6,\r\n    marginTop: 10,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  roleContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginBottom: 10,\r\n    alignItems: 'center',\r\n  },\r\n  roleButton: {\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#aaa',\r\n    borderRadius: 6,\r\n  },\r\n  roleSelected: {\r\n    backgroundColor: '#eee',\r\n  },\r\n  label: {\r\n    marginRight: 8,\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}