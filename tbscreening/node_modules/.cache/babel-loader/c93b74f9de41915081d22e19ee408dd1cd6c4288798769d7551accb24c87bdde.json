{"ast":null,"code":"var _jsxFileName = \"C:\\\\laragon\\\\www\\\\WebsiteTBC\\\\tbscreening\\\\src\\\\screens\\\\LoginScreen.js\",\n  _s = $RefreshSig$();\n// src/screens/LoginScreen.js\nimport { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginScreen() {\n  _s();\n  var _location$state, _location$state2;\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const location = useLocation();\n  const redirectTo = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.redirectTo) || null;\n  const redirectParams = ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.params) || {};\n  const showAlert = (title, message) => {\n    window.alert(`${title}\\n\\n${message}`);\n  };\n  const handleLogin = async () => {\n    if (!username || !password) {\n      showAlert('Login Gagal', 'Harap isi username dan password terlebih dahulu.');\n      return;\n    }\n    try {\n      const response = await fetch('http://localhost:5000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const result = await response.json();\n      if (response.ok && result.user) {\n        const userData = {\n          user_id: result.user.user_id,\n          username: result.user.username,\n          role: result.user.role || 'user'\n        };\n        localStorage.setItem('user', JSON.stringify(userData));\n        showAlert('Login Berhasil', `Selamat datang, ${result.user.username}!`);\n        if (redirectTo) {\n          navigate(redirectTo, {\n            state: redirectParams\n          });\n        } else {\n          navigate('/mainmenu');\n        }\n      } else {\n        if (result.message) {\n          showAlert('Login Gagal', result.message);\n        } else if (response.status === 401) {\n          showAlert('Login Gagal', 'Kata sandi salah.');\n        } else if (response.status === 404) {\n          showAlert('Login Gagal', 'Username tidak ditemukan.');\n        } else {\n          showAlert('Login Gagal', 'Terjadi kesalahan saat login.');\n        }\n      }\n    } catch (error) {\n      console.error(error);\n      showAlert('Error', 'Gagal terhubung ke server. Coba lagi nanti.');\n    }\n  };\n  const goToRegister = () => {\n    navigate('/register');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: styles.title,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Username\",\n      value: username,\n      onChange: e => setUsername(e.target.value),\n      style: styles.input,\n      autoCapitalize: \"none\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Password\",\n      type: \"password\",\n      value: password,\n      onChange: e => setPassword(e.target.value),\n      style: styles.input\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: styles.button,\n      onClick: handleLogin,\n      children: \"Masuk\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.link,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToRegister,\n        style: {\n          background: 'none',\n          border: 'none',\n          color: '#555'\n        },\n        children: \"Belum punya akun? Daftar di sini\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginScreen, \"8iuj56DQbjOZaSpAREM6vDsJrS4=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = LoginScreen;\nconst styles = {\n  container: {\n    maxWidth: '400px',\n    margin: 'auto',\n    padding: '24px',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  title: {\n    fontSize: '24px',\n    color: '#d10000',\n    fontWeight: 'bold',\n    marginBottom: '20px',\n    textAlign: 'center'\n  },\n  input: {\n    border: '1px solid #999',\n    borderRadius: '6px',\n    padding: '10px',\n    marginBottom: '12px',\n    fontSize: '16px'\n  },\n  button: {\n    backgroundColor: '#d10000',\n    color: '#fff',\n    padding: '12px',\n    borderRadius: '6px',\n    fontWeight: 'bold',\n    cursor: 'pointer'\n  },\n  link: {\n    marginTop: '15px',\n    textAlign: 'center'\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["useState","useNavigate","useLocation","jsxDEV","_jsxDEV","LoginScreen","_s","_location$state","_location$state2","username","setUsername","password","setPassword","navigate","location","redirectTo","state","redirectParams","params","showAlert","title","message","window","alert","handleLogin","response","fetch","method","headers","body","JSON","stringify","result","json","ok","user","userData","user_id","role","localStorage","setItem","status","error","console","goToRegister","style","styles","container","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","input","autoCapitalize","type","button","onClick","link","background","border","color","_c","maxWidth","margin","padding","display","flexDirection","justifyContent","backgroundColor","fontSize","fontWeight","marginBottom","textAlign","borderRadius","cursor","marginTop","$RefreshReg$"],"sources":["C:/laragon/www/WebsiteTBC/tbscreening/src/screens/LoginScreen.js"],"sourcesContent":["// src/screens/LoginScreen.js\r\nimport { useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\n\r\nexport default function LoginScreen() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const redirectTo = location.state?.redirectTo || null;\r\n  const redirectParams = location.state?.params || {};\r\n\r\n  const showAlert = (title, message) => {\r\n    window.alert(`${title}\\n\\n${message}`);\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    if (!username || !password) {\r\n      showAlert('Login Gagal', 'Harap isi username dan password terlebih dahulu.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok && result.user) {\r\n  const userData = {\r\n    user_id: result.user.user_id,\r\n    username: result.user.username,\r\n    role: result.user.role || 'user',\r\n  };\r\n\r\n  localStorage.setItem('user', JSON.stringify(userData));\r\n\r\n  showAlert('Login Berhasil', `Selamat datang, ${result.user.username}!`);\r\n\r\n  if (redirectTo) {\r\n    navigate(redirectTo, { state: redirectParams });\r\n  } else {\r\n    navigate('/mainmenu');\r\n  }\r\n} else {\r\n        if (result.message) {\r\n          showAlert('Login Gagal', result.message);\r\n        } else if (response.status === 401) {\r\n          showAlert('Login Gagal', 'Kata sandi salah.');\r\n        } else if (response.status === 404) {\r\n          showAlert('Login Gagal', 'Username tidak ditemukan.');\r\n        } else {\r\n          showAlert('Login Gagal', 'Terjadi kesalahan saat login.');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      showAlert('Error', 'Gagal terhubung ke server. Coba lagi nanti.');\r\n    }\r\n  };\r\n\r\n  const goToRegister = () => {\r\n    navigate('/register');\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2 style={styles.title}>Login</h2>\r\n\r\n      <input\r\n        placeholder=\"Username\"\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        style={styles.input}\r\n        autoCapitalize=\"none\"\r\n      />\r\n\r\n      <input\r\n        placeholder=\"Password\"\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n        style={styles.input}\r\n      />\r\n\r\n      <button style={styles.button} onClick={handleLogin}>\r\n        Masuk\r\n      </button>\r\n\r\n      <div style={styles.link}>\r\n        <button onClick={goToRegister} style={{ background: 'none', border: 'none', color: '#555' }}>\r\n          Belum punya akun? Daftar di sini\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: '400px',\r\n    margin: 'auto',\r\n    padding: '24px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#fff',\r\n  },\r\n  title: {\r\n    fontSize: '24px',\r\n    color: '#d10000',\r\n    fontWeight: 'bold',\r\n    marginBottom: '20px',\r\n    textAlign: 'center',\r\n  },\r\n  input: {\r\n    border: '1px solid #999',\r\n    borderRadius: '6px',\r\n    padding: '10px',\r\n    marginBottom: '12px',\r\n    fontSize: '16px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#d10000',\r\n    color: '#fff',\r\n    padding: '12px',\r\n    borderRadius: '6px',\r\n    fontWeight: 'bold',\r\n    cursor: 'pointer',\r\n  },\r\n  link: {\r\n    marginTop: '15px',\r\n    textAlign: 'center',\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}